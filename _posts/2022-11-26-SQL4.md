---
title: "SQL 데이터베이스 생성/삭제"
execrpt: "SQL 데이터베이스 관리 , 생성/삭제 설명"
toc: true
toc_sticky: true
categories:
  - SQL
tags:
  - SQL
  - MYSQL
last_modified_at: 2022-11-26
---

## 데이터베이스 생성/삭제

- 데이터베이스 생성하기

```sql
create database `데이터베이스이름` [default charset `utf8`];
```
- 기존에 존재하는 데이터베이스와 동일한 이름의 데이터베이스는 생성할 수 없다.
- 기본 케릭터 셋은 utf8, euckr 등의 값을 지정할 수 있다.

- 데이터베이스 삭제하기

```sql
drop database `데이터베이스이름`;
```
- 존재하지 않는 데이터베이스의 이름을 지정한 경우 에러가 발생한다.
- 삭제한 데이터베이스는 복구할 수 없기 떄문에 신중히 수행해야 한다.


![](https://user-images.githubusercontent.com/105098581/204087689-34975af0-b087-4370-99ee-046b585d9313.png)

## 테이블 생성하기

```sql
create table `테이블이름` (
    `컬럼이름` 데이터타입 [NOT NULL | NULL][AUTO_INCREMENT][COMMENT '컬럼설명'],
    `컬럼이름` 데이터타입 [NOT NULL | NULL][AUTO_INCREMENT][COMMENT '컬럼설명'],
    `컬럼이름` 데이터타입 [NOT NULL | NULL][AUTO_INCREMENT][COMMENT '컬럼설명'],
    [, PRIMARY KEY(`기본키컬럼이름`)]
)[ENGINE = InnoDB][DEFAULT CHARSET = `utf8`][COMMENT = '테이블 설명'];
```

```sql
CREATE TABLE <테이블이름> ()ENGINE=InnoDB DEFAULT CHARASET `utf8`;
```
- 괄호 안에 테이블이 포함할 칼럼의 이름과 데이터 타입쌍을 콤마로 구분하여 명시한다.
- **ENGINE = InnoDB** -> Oracle이 MySQL을 인수한 후에 추가한 저장형식으로 참조키나 프로시저 등의 고급 기능을 사용할 수 있게 한다.
- **DEFAULT CHARSET=`utf8'** -> 기본 문자열 저장 형식을 UTF8로 설정한다.
- 테이블 이름이나 컬럼이름에는 역따옴표를 적용한다.(필수아님)
- COMMENT는 홑따옴표를 적용한다.

```
일반적으로 테이블 이름은 "~~들"이라는 의미로 영어 복수형으로 지정(~s)
칼럼 이름은 개별적인 값이므로 영어 단수형으로 지정
```

- 데이터 타입

| 구분             | 데이터타입                                           | 설명                                                                                                                                                                                                                                                                                                                                                     |
| ---------------- | ---------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 문자 문장형      | CHAR(n)                                              | 글자수가 최대 n개인 고정 길이 문자열 저장<br />->한글, 영문 구분 없이 한 글자로 취급함.<br />EX) char(10)이라 지정된 컬럼의 경우<br />->"mysql"이라 저장하면 모자란 5글자는 공백처리되어 "mysql     "이라 저장된다.<br />"mysql database"라 저장하면 초과되는 4글자는 저장되지 않는다. <br /> 우편번호, 주민번호 등과 같이 글자수가 고정된 데이터에 사용 |
|                  | VARCHAR(n)                                           | 글자수가 최대 n개인 가변 길이 문자열 저장 <br />아이디, 이메일 주소, 비밀번호, 글 제목 등 글자수가 불규칙 적인 데이터에 적용                                                                                                                                                                                                                             |
|                  | TEXT                                                 | 최대 65535 길이의 문자열을 저장한다. (ex:게시판의 본문 등)                                                                                                                                                                                                                                                                                               |
| 숫자형           | TINYINT<br />SMALLINT<br />**INT(기본)**<br />BIGINT | 정수 형태의 데이터를 저장한다.<br />(tinyint > smallint > int > bigint)                                                                                                                                                                                                                                                                                  |
|                  | FLOAT(m,n)                                           | 실수 형태의 데이터를 저장한다.<br />M은 전체 자리수(소수점도 자리수에 포함됨), n은 소수점 이하의 자리수.                                                                                                                                                                                                                                                 |
| 날짜형<br />기타 | DATE                                                 | 날짜 형식의 데이터를 저장한다.(YYYY-MM-DD)                                                                                                                                                                                                                                                                                                               |
|                  | DATETIME                                             | 날짜+시간 형식의 데이터를 저장한다.(YYYY-MM-DD HH:MI:SS)                                                                                                                                                                                                                                                                                                 |
|                  | BLOB                                                 | 최대 65535 길이의 바이너리를 저장한다.(게시판 본문 등에 사용)<br />**(UTF8 환경에서 TEXT보다 권장함)**                                                                                                                                                                                                                                                   |
|                  | ENUM('A','B','C',...'Z')                             | 저장 가능한 값을 A,B,C ...Z로 제한한다.<br />Ex)성별 -> ENUM('F','M')<br />메일링 가입 -> ENUM('Y', 'N')                                                                                                                                                                                                                                                 |


- 데이터 타입을 결정한 후에는 Null 데이터의 허용 여부를 명시한다.
  - Null : 널 데이터 허용 함 -> 일반적으로 미필수 입력 항목에 사용한다.
  - Not Null : 널 데이터 허용 안함 -> 필수 입력 항목에 사용한다.
- 기본키 (Primary Key) 지정 방법
  - 컬럼을 나열할 때 Primary Key라 명시한다.

```sql
CREATE TABLE `test` (
    `column1` int not null primary key comment '컬럼1',
    `column2` varchar(10) not null comment '칼럼2',
)ENGINE = InnoDB DEFAULT CHARASET = `utf8` comment = 'test테이블';
```
  - 컬럼의 목록을 모두 나열한 후 Primary Key('컬럼이름')의 형식으로 명시한다.

```sql
CREATE TABLE `test`(
    `column1` int not null comment '컬럼1',
    `column2` varchar(10) not null comment '컬럼2',
    primary key (`column1`)
)ENGINE = InnoDB DEFAULT CHARSET = `utf8` comment = 'test테이블';
```

- 자동증가 일련번호의 설정
  - 각 데이터 행을 고유하게 구분하기 위해 설정하는 Primary Key 가 int 형인 경우, AUTO_INCREMENT 옵션을 추가하면 데이터 INSERT 시에 자동으로 1씩 증가된 값이 저장된다.

```sql
CREATE TABLE `test`(
    `column1` int not null primary key auto_increment,
    `column2` varchar(10) not null
)ENGINE = InnoDB DEFAULT CHARSET = `utf8`;
```
```sql
CREATE TABLE `test`(
    `column1` int not null auto_increment,
    `column2` varchar(10) not null,
    primary key (`column1`)
)ENGINE = InnoDB DEFAULT CHARSET = `utf8`;
```

ex) id(int, PK, 자동증가), memo(varchar(255)),reg_date(datetime)의 칼럼을 갖는 테이블을 생성

![](https://user-images.githubusercontent.com/105098581/204089617-32ecbedc-9aaa-4106-890b-13da957ead90.png)


## 테이블 삭제하기

```sql
drop table `테이블이름`;
```
- 존재하지 않는 테이블을 삭제할 경우 에러가 발생한다.
- 삭제된 테이블은 복구 할 수 없으므로, 주의가 필요하다.

ex) 앞 예제에서 생성한 mytable을 삭제하시오

![](https://user-images.githubusercontent.com/105098581/204089660-b57f99ea-9542-46bf-a30a-a04685b56be7.png)


## 연습문제

ex) 다음은 어느 쇼핑몰의 회원 정보를 저장하는 테이블 명세이다. 이 명세서를 참고하여 CREATE 구문을 작성하시오.

![](https://user-images.githubusercontent.com/105098581/204089693-60911bdb-a565-4e34-995e-db9c0c15d1c6.png)
  
풀이 

![](https://user-images.githubusercontent.com/105098581/204089719-e683cb40-6d12-4a38-a9e0-9061fddc8dce.png)


## 테이블 수정하기

- 테이블의 구조 변경하기

```sql
alter table `테이블이름` 명령어;
```

- 명령어의 종류

| 명령어 | 설명                          |
| ------ | ----------------------------- |
| rename | 테이블의 이름을 변경한다.     |
| add    | 컬럼이나 제약조건을 추가한다. |
| change | 컬럼을 수정한다.              |
| drop   | 컬럼이나 제약조건을 삭제한다. |


ex) 'mytable'의 이름을 'mytest'로 변경하기

```sql
alter table `mytable` rename `mytest`;
```

![](https://user-images.githubusercontent.com/105098581/204089840-a8832ddc-410d-42be-8087-4147a13d2246.png)

ex) datetime 형식의 edit_date 컬럼을 Not Null로 추가

```sql
alter table `mytest` add `edit_date` datetime not null;
```

![](https://user-images.githubusercontent.com/105098581/204089872-6a8bf3a9-0992-4f90-81dd-755811088548.png)

ex) ADD 명령어와 AFTER 옵션을 사용하여 특정 칼럼 뒤에 새로운 컬럼 추가

```sql
alter table `mytest` add `writer` varchar(50) null after `id`;
```

![](https://user-images.githubusercontent.com/105098581/204089900-35fe6590-60a5-4795-98b2-1c616da7b4e7.png)

ex) 'memo'컬럼을 수정하기 : 컬럼명 -> 'comment'/데이터 타입 -> text/null 허용
```sql
alter table `mytest` change `memo` `comment` text null;
```
![](https://user-images.githubusercontent.com/105098581/204435806-9fb34317-30b4-437b-b969-e1b0090e5926.png)

ex) 'writer'컬럼의 이름을 유지한 상태에서 데이터 타입만 변경하기
  - 컬럼이름과 Null 허용 여부는 기존과 동일하게 명시하고, 변경하려는 데이터 타입만 기존의 형태와 다르게 지정한다.

```sql
alter table `mytest` change `writer` `writer` varchar(100) not null;
```

![](https://user-images.githubusercontent.com/105098581/204436003-65b537f2-037b-41ea-b33f-91aa3d07fe30.png)

ex) 'edit_date'컬럼을 삭제하기
```sql
alter table `mytest` drop `edit_date`;
```

![](https://user-images.githubusercontent.com/105098581/204436131-5d728c9c-f0af-4914-bbe8-91b09611cf12.png)

ex) id 칼럼의 기본키 속성을 해제하기
  - 기본키는 AUTO_INCREMENT 속성이 있을경우 해제할 수 없기 때문에 CHANGE 명령어를 사용하여 **AUTO_INCREMENT 속성을 제거**해야 한다.
  - 기본키를 해제할 경우 DROP PRIMARY KEY명령어를 사용한다.

```sql
alter table `mytest` change `id` `id` int not null;

alter table `mytest` drop primary key;
```

![](https://user-images.githubusercontent.com/105098581/204436343-d0bfd927-b9c9-4321-8955-7af1ca829d63.png)

ex) 'id'칼럼에 기본키를 설정하고, AUTO_INCREMENT 속성을 추가하기
  - AUTO_INCREMENT는 기본키에만 설정할 수 있는 속성이다.

```sql
alter table `mytest` add primary key (id);

alter table `mytest` change id id int not null auto_increment;
```

![](https://user-images.githubusercontent.com/105098581/204436768-12765ec6-7802-420d-afc4-189ebab73afb.png)


